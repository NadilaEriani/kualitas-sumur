/* =========================================================
   SIG KUALITAS AIR SUMUR â€” MODERN UI 2025
========================================================= */

:root {
  --s-0: 0; --s-1: 4px; --s-2: 8px; --s-3: 12px; --s-4: 16px;
  --s-5: 20px; --s-6: 24px; --s-7: 32px; --s-8: 40px; --s-9: 48px; --s-10: 56px;

  --r-sm: 10px; --r-md: 14px; --r-lg: 18px; --r-xl: 22px; --r-pill: 999px;

  --sh-xs: 0 1px 0 rgba(0,0,0,.06);
  --sh-sm: 0 10px 25px rgba(15,23,42,.12);
  --sh-md: 0 18px 60px rgba(15,23,42,.16);
  --sh-lg: 0 28px 90px rgba(0,0,0,.25);

  --brand-1: #0ea5e9;
  --brand-2: #1d4ed8;
  --accent: #f97316;
  --ok: #22c55e;
  --warn: #facc15;
  --danger: #ef4444;

  --bg: #0b1224;
  --surface: rgba(255,255,255,.06);
  --surface-2: rgba(255,255,255,.10);
  --border: rgba(255,255,255,.12);
  --text: #f8fafc;
  --muted: rgba(226,232,240,.82);
  --focus: rgba(96,165,250,.45);

  --font: "Plus Jakarta Sans", system-ui, -apple-system, sans-serif;
  --nav-h: 64px;
}

:root[data-theme="light"] {
  --bg: #f8fafc;
  --surface: rgba(15,23,42,.04);
  --surface-2: rgba(15,23,42,.06);
  --border: rgba(15,23,42,.10);
  --text: #0f172a;
  --muted: rgba(51,65,85,.78);
  --sh-sm: 0 10px 25px rgba(2,6,23,.08);
  --sh-md: 0 18px 60px rgba(2,6,23,.10);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  line-height: 1.55;
  text-rendering: optimizeLegibility;
}
a { color: inherit; }
img { max-width: 100%; display: block; }

::selection { background: rgba(14,165,233,.25); }
:focus-visible {
  outline: 3px solid var(--focus);
  outline-offset: 2px;
  border-radius: 10px;
}

.container {
  width: min(1180px, 92%);
  margin: 0 auto;
}
.muted { color: var(--muted); }
.db-mono, .mono {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", "Courier New", monospace;
}
.hidden { display: none !important; }

.reveal {
  opacity: 0;
  transform: translateY(12px);
  transition: opacity .6s ease, transform .6s ease;
}
.reveal.is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* ========== BUTTONS ========== */
.btn, .nav-btn, .db-btn, .btn-filter {
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  padding: 10px 14px;
  border-radius: var(--r-pill);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  font: inherit;
  text-decoration: none;
  transition: transform .15s ease, background .15s ease, box-shadow .15s ease;
  user-select: none;
}
.btn:hover, .nav-btn:hover, .db-btn:hover, .btn-filter:hover {
  transform: translateY(-1px);
  background: var(--surface-2);
}
.btn:active, .nav-btn:active, .db-btn:active, .btn-filter:active {
  transform: translateY(0);
}
.btn.primary, .nav-btn.primary, .db-btn.primary, .btn-filter.primary {
  border-color: rgba(249,115,22,.45);
  background: linear-gradient(135deg, var(--accent), #ea580c);
  box-shadow: 0 18px 45px rgba(234,88,12,.22);
}
.btn.primary:hover, .nav-btn.primary:hover, .db-btn.primary:hover {
  box-shadow: 0 22px 58px rgba(234,88,12,.28);
}
.btn.outline {
  background: transparent;
  border-color: var(--border);
}
.btn.ghost, .nav-btn.ghost {
  background: transparent;
}
.btn:disabled, .db-btn:disabled {
  opacity: .55;
  cursor: not-allowed;
  transform: none;
}

/* ========== NAVBAR ========== */
.topnav {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: var(--nav-h);
  z-index: 9999;
  backdrop-filter: blur(14px);
  border-bottom: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 78%, transparent);
}
.topnav-inner {
  height: var(--nav-h);
  width: min(1180px, 92%);
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s-4);
}
.nav-brand {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  border-radius: var(--r-md);
  padding: 8px 10px;
}
.nav-brand:hover { background: var(--surface); }
.nav-mark {
  width: 40px; height: 40px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  background: linear-gradient(135deg, var(--brand-1), var(--brand-2));
  color: #fff;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.14);
}
.nav-title { font-weight: 800; letter-spacing: .2px; }
.nav-sub {
  margin-left: 6px;
  padding: 6px 10px;
  border-radius: var(--r-pill);
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--muted);
  font-size: 12px;
}
.nav-links {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px;
  border-radius: var(--r-lg);
  border: 1px solid var(--border);
  background: var(--surface);
}
.nav-link {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--r-md);
  text-decoration: none;
  color: var(--muted);
  transition: background .15s ease, transform .15s ease, color .15s ease;
}
.nav-link:hover {
  background: var(--surface-2);
  transform: translateY(-1px);
  color: var(--text);
}
.nav-link.active {
  color: var(--text);
  border: 1px solid rgba(96,165,250,.35);
  background: linear-gradient(135deg, rgba(29,78,216,.18), rgba(255,255,255,.04));
}
.nav-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}
.theme-toggle {
  padding: 10px 12px;
}
.theme-toggle span {
  font-size: 13px;
  color: var(--muted);
}

/* ========== LAYOUT ========== */
.main {
  padding-top: calc(var(--nav-h) + var(--s-7));
  padding-bottom: var(--s-10);
}
.section {
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  background: var(--surface);
  box-shadow: var(--sh-md);
  overflow: hidden;
}
.section + .section { margin-top: var(--s-6); }
.section-pad { padding: var(--s-6); }

.section-head {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: var(--s-4);
  padding: var(--s-6);
  border-bottom: 1px solid var(--border);
  background: linear-gradient(135deg, rgba(14,165,233,.10), transparent);
}
.section-head h3 {
  margin: 0;
  font-size: 20px;
  letter-spacing: .2px;
}
.section-head p { margin: 6px 0 0; color: var(--muted); }

/* ========== LANDING ========== */
body.landing {
  background:
    radial-gradient(900px 420px at 18% 0%, rgba(29,78,216,.22), transparent 62%),
    radial-gradient(800px 380px at 86% 8%, rgba(249,115,22,.14), transparent 60%),
    linear-gradient(180deg, var(--bg), color-mix(in srgb, var(--bg) 82%, #000 18%));
}

.hero {
  position: relative;
  min-height: calc(100vh - var(--nav-h));
  padding-top: calc(var(--nav-h) + var(--s-8));
  padding-bottom: var(--s-8);
}
.hero-grid {
  width: min(1180px, 92%);
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1.15fr 0.85fr;
  gap: var(--s-7);
  align-items: center;
}
.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border-radius: var(--r-pill);
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--muted);
  box-shadow: var(--sh-sm);
}
.hero h1 {
  margin: var(--s-4) 0 0;
  font-size: 44px;
  line-height: 1.08;
  letter-spacing: -0.4px;
}
.hero h2 {
  margin: var(--s-2) 0 0;
  font-size: 22px;
  color: var(--muted);
  font-weight: 600;
}
.hero .lead {
  margin-top: var(--s-4);
  color: var(--muted);
  max-width: 58ch;
}
.hero-actions {
  margin-top: var(--s-5);
  display: flex;
  gap: var(--s-3);
  flex-wrap: wrap;
}
.hero-kpis {
  margin-top: var(--s-6);
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--s-3);
}
.kpi {
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: var(--r-lg);
  padding: var(--s-4);
  box-shadow: var(--sh-sm);
  transition: transform .18s ease, background .18s ease, border-color .18s ease;
}
.kpi:hover {
  transform: translateY(-2px);
  background: var(--surface-2);
  border-color: color-mix(in srgb, var(--border) 60%, rgba(14,165,233,.28));
}
.kpi .k { color: var(--muted); font-size: 12.5px; }
.kpi .v { font-size: 22px; font-weight: 800; margin-top: 2px; }

.hero-visual {
  position: relative;
  border-radius: 26px;
  border: 1px solid var(--border);
  background: linear-gradient(180deg, color-mix(in srgb, var(--surface) 70%, rgba(29,78,216,.12)), var(--surface));
  box-shadow: var(--sh-lg);
  overflow: hidden;
}
.hero-visual::before {
  content: "";
  position: absolute;
  inset: -40%;
  background:
    radial-gradient(circle at 30% 30%, rgba(14,165,233,.35), transparent 55%),
    radial-gradient(circle at 70% 60%, rgba(249,115,22,.22), transparent 60%);
  filter: blur(28px);
  opacity: .9;
  pointer-events: none;
}
.visual-inner {
  position: relative;
  padding: var(--s-7);
}
.visual-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 800;
  margin-bottom: var(--s-4);
}
.visual-card {
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 80%, rgba(255,255,255,.02));
  border-radius: var(--r-xl);
  padding: var(--s-5);
  box-shadow: var(--sh-md);
}
.floaty {
  animation: floaty 4.2s ease-in-out infinite;
  filter: drop-shadow(0 14px 28px rgba(0,0,0,.25));
}
@keyframes floaty {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.grid {
  display: grid;
  gap: var(--s-4);
}
.cards-3 { grid-template-columns: repeat(3, minmax(0,1fr)); }
.cards-4 { grid-template-columns: repeat(4, minmax(0,1fr)); }
.split-grid { grid-template-columns: 1.2fr .8fr; align-items: start; }

.card {
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  background: var(--surface);
  box-shadow: var(--sh-sm);
  padding: var(--s-5);
  transition: transform .18s ease, background .18s ease, border-color .18s ease;
}
.card:hover {
  transform: translateY(-2px);
  background: var(--surface-2);
  border-color: color-mix(in srgb, var(--border) 65%, rgba(14,165,233,.22));
}
.card .ic {
  width: 44px; height: 44px;
  border-radius: 16px;
  display: grid;
  place-items: center;
  background: linear-gradient(135deg, rgba(14,165,233,.28), rgba(29,78,216,.20));
  border: 1px solid var(--border);
  margin-bottom: var(--s-3);
}
.card h4 { margin: 0 0 6px; }
.card p { margin: 0; color: var(--muted); }

.panel {
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  background: color-mix(in srgb, var(--surface) 82%, rgba(255,255,255,.02));
  padding: var(--s-5);
  box-shadow: var(--sh-sm);
}
.list {
  list-style: none;
  padding: 0;
  margin: var(--s-3) 0 0;
  display: grid;
  gap: var(--s-3);
}
.list li {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  color: var(--muted);
}
.list li i { margin-top: 4px; color: var(--ok); }

/* ========== STATISTICS PAGE ========== */
.stat-card {
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  background: var(--surface);
  box-shadow: var(--sh-sm);
  padding: var(--s-5);
  display: flex;
  gap: var(--s-4);
  transition: transform .18s ease, background .18s ease;
}
.stat-card:hover {
  transform: translateY(-2px);
  background: var(--surface-2);
}
.stat-icon {
  width: 56px; height: 56px;
  border-radius: 18px;
  display: grid;
  place-items: center;
  font-size: 24px;
  color: #fff;
  flex-shrink: 0;
}
.stat-icon.blue {
  background: linear-gradient(135deg, #0ea5e9, #0284c7);
}
.stat-icon.danger {
  background: linear-gradient(135deg, #ef4444, #dc2626);
}
.stat-icon.warn {
  background: linear-gradient(135deg, #f59e0b, #d97706);
}
.stat-icon.ok {
  background: linear-gradient(135deg, #22c55e, #16a34a);
}
.stat-content {
  flex: 1;
}
.stat-label {
  color: var(--muted);
  font-size: 13px;
}
.stat-value {
  font-size: 32px;
  font-weight: 800;
  margin: 4px 0;
}
.stat-change {
  font-size: 12px;
  color: var(--muted);
  display: flex;
  align-items: center;
  gap: 6px;
}
.stat-change.positive { color: var(--ok); }

.stats-table {
  display: grid;
  gap: 1px;
  background: var(--border);
  border-radius: var(--r-lg);
  overflow: hidden;
}
.stats-row {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
  gap: 1px;
  background: var(--border);
}
.stats-cell {
  background: var(--surface);
  padding: var(--s-4);
  display: flex;
  align-items: center;
  gap: 8px;
}
.stats-cell.header {
  background: color-mix(in srgb, var(--bg) 70%, rgba(14,165,233,.10));
  font-weight: 700;
  font-size: 13px;
}

/* ========== FOOTER ========== */
.footer {
  margin-top: var(--s-6);
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  background: var(--surface);
  box-shadow: var(--sh-md);
  overflow: hidden;
}
.footer-inner {
  padding: var(--s-6);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s-4);
  flex-wrap: wrap;
}
.footer-bottom {
  border-top: 1px solid var(--border);
  padding: var(--s-4) var(--s-6);
  color: var(--muted);
  font-size: 13px;
}
.link-btn {
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  padding: 10px 12px;
  border-radius: var(--r-pill);
  display: inline-flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  cursor: pointer;
  transition: transform .15s ease, background .15s ease;
}
.link-btn:hover { background: var(--surface-2); transform: translateY(-1px); }

/* ========== MODAL ========== */
.modal, .db-modal {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  padding: var(--s-5);
  background: rgba(0,0,0,.60);
  z-index: 10000;
}
.modal.open, .db-modal.open { display: flex; }

.modal-card, .db-modal-card {
  width: min(860px, 96vw);
  border: 1px solid var(--border);
  border-radius: 24px;
  background: color-mix(in srgb, var(--bg) 80%, rgba(255,255,255,.05));
  box-shadow: var(--sh-lg);
  backdrop-filter: blur(14px);
  overflow: hidden;
  transform: translateY(10px);
  opacity: 0;
  animation: modalIn .18s ease forwards;
}
@keyframes modalIn {
  to { transform: translateY(0); opacity: 1; }
}
.modal-head, .db-modal-head {
  padding: var(--s-5);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s-3);
  border-bottom: 1px solid var(--border);
  background: linear-gradient(135deg, rgba(14,165,233,.12), rgba(249,115,22,.08));
}
.icon-btn, .db-icon-btn {
  width: 44px;
  height: 44px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  cursor: pointer;
  transition: transform .15s ease, background .15s ease;
}
.icon-btn:hover, .db-icon-btn:hover { background: var(--surface-2); transform: translateY(-1px); }
.modal-body { padding: var(--s-6); }
.modal-foot { padding: var(--s-5); border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: var(--s-3); flex-wrap: wrap; }

/* ========== TOAST ========== */
.toast, .db-toast {
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  padding: 10px 14px;
  border-radius: var(--r-pill);
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease, transform .18s ease;
  z-index: 10001;
}
.toast.show, .db-toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(-2px);
}
.toast.ok, .db-toast.ok {
  border-color: rgba(34,197,94,.45);
  background: color-mix(in srgb, var(--surface) 70%, rgba(34,197,94,.16));
}
.toast.bad, .db-toast.bad {
  border-color: rgba(239,68,68,.45);
  background: color-mix(in srgb, var(--surface) 70%, rgba(239,68,68,.16));
}

/* ========== SKELETON ========== */
.skeleton {
  position: relative;
  overflow: hidden;
  background: color-mix(in srgb, var(--surface) 80%, rgba(255,255,255,.04));
  border: 1px solid var(--border);
  border-radius: 12px;
}
.skeleton::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-60%);
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.10), transparent);
  animation: shimmer 1.1s infinite;
}
@keyframes shimmer {
  to { transform: translateX(60%); }
}

/* =========================================================
   MAP PAGE
========================================================= */
body.map-page {
  padding-top: var(--nav-h);
  overflow: hidden;
}

#map {
  position: absolute;
  top: var(--nav-h);
  right: 0;
  bottom: 0;
  left: 360px;
}

#sidebar {
  position: absolute;
  top: var(--nav-h);
  left: 0;
  width: 360px;
  height: calc(100vh - var(--nav-h));
  border-right: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 82%, rgba(255,255,255,.06));
  backdrop-filter: blur(12px);
  z-index: 1100;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.sidebar-top {
  padding: var(--s-5);
  border-bottom: 1px solid var(--border);
  background: linear-gradient(135deg, rgba(14,165,233,.10), transparent);
}
.sidebar-top h2 {
  margin: 0;
  font-size: 18px;
  letter-spacing: .2px;
}
.sidebar-top .subtitle { color: var(--muted); font-size: 12.5px; margin-top: 4px; }

.sidebar-search {
  margin-top: var(--s-4);
  display: grid;
  gap: 8px;
}
.input {
  width: 100%;
  padding: 11px 12px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  outline: none;
}
.input:focus { box-shadow: 0 0 0 4px rgba(96,165,250,.18); border-color: rgba(96,165,250,.35); }

.quick-actions {
  margin-top: var(--s-3);
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--s-3);
}
.quick-actions .btn {
  justify-content: center;
  border-radius: var(--r-md);
  padding: 10px 12px;
}

.tabs {
  padding: var(--s-3);
  display: flex;
  gap: 8px;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
}
.tab-btn {
  flex: 1;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--muted);
  border-radius: var(--r-md);
  padding: 10px 10px;
  cursor: pointer;
  transition: background .15s ease, color .15s ease, transform .15s ease;
}
.tab-btn:hover { background: var(--surface-2); transform: translateY(-1px); color: var(--text); }
.tab-btn.active {
  background: linear-gradient(135deg, rgba(14,165,233,.16), rgba(29,78,216,.10));
  color: var(--text);
  border-color: rgba(96,165,250,.28);
}

.tab-panels {
  overflow: auto;
  padding: var(--s-4);
  display: grid;
  gap: var(--s-4);
}

.map-card {
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  background: var(--surface);
  box-shadow: var(--sh-sm);
  padding: var(--s-4);
}
.map-card h3 {
  margin: 0 0 var(--s-3);
  font-size: 14px;
  letter-spacing: .2px;
  color: var(--text);
}
.stat-row {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px dashed var(--border);
  color: var(--muted);
}
.stat-row b { color: var(--text); }
.stat-row:last-child { border-bottom: none; }

.switch-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  color: var(--muted);
  padding: 8px 0;
}
.dot {
  height: 12px;
  width: 12px;
  border-radius: 50%;
  display: inline-block;
  margin-right: 8px;
}
.dot.red { background: var(--danger); }
.dot.yellow { background: var(--warn); }
.dot.green { background: var(--ok); }
.dot.blue { background: #3b82f6; }
.dot.teal { background: #14b8a6; }

.switch {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 22px;
}
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
  position: absolute; inset: 0;
  background-color: rgba(148,163,184,.5);
  border-radius: var(--r-pill);
  transition: .25s;
}
.slider:before {
  position: absolute;
  content: "";
  height: 16px; width: 16px;
  left: 3px; top: 3px;
  background-color: #fff;
  border-radius: 50%;
  transition: .25s;
}
.switch input:checked + .slider {
  background: linear-gradient(135deg, rgba(34,197,94,.9), rgba(14,165,233,.65));
}
.switch input:checked + .slider:before { transform: translateX(22px); }

.filter-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--s-3);
}
.fg label { font-size: 12px; color: var(--muted); margin-bottom: 6px; display: block; }
.filter-actions {
  margin-top: var(--s-3);
  display: flex;
  gap: var(--s-3);
}
.filter-result {
  margin-top: var(--s-3);
  color: var(--muted);
}

#basemap-control {
  position: absolute;
  top: calc(var(--nav-h) + 14px);
  right: 14px;
  z-index: 1200;
  border: 1px solid var(--border);
  background: var(--surface);
  backdrop-filter: blur(12px);
  border-radius: var(--r-xl);
  padding: var(--s-4);
  box-shadow: var(--sh-sm);
}
#basemap-control h4 { margin: 0 0 10px; font-size: 13px; color: var(--muted); }
#basemap-select {
  width: 100%;
  padding: 10px 12px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
}

#map-loading {
  position: absolute;
  top: var(--nav-h);
  left: 360px;
  right: 0;
  bottom: 0;
  z-index: 1300;
  display: grid;
  place-items: center;
  background: rgba(0,0,0,.18);
  backdrop-filter: blur(6px);
}
.loading-card {
  width: min(520px, 92%);
  border-radius: 24px;
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--sh-lg);
  padding: var(--s-6);
}
.loading-lines {
  display: grid;
  gap: 10px;
  margin-top: var(--s-4);
}
.loading-lines .skeleton { height: 14px; }
.loading-lines .skeleton.big { height: 18px; width: 70%; }

.leaflet-popup-content-wrapper,
.leaflet-popup-tip {
  background: color-mix(in srgb, var(--bg) 75%, rgba(255,255,255,.06)) !important;
  color: var(--text) !important;
  border: 1px solid var(--border);
}
.leaflet-popup-content { margin: 10px 12px; }
.popup-card {
  min-width: 240px;
}
.popup-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}
.badge-risk {
  padding: 6px 10px;
  border-radius: var(--r-pill);
  border: 1px solid var(--border);
  font-size: 12px;
  color: var(--text);
}
.badge-risk.high { background: color-mix(in srgb, rgba(239,68,68,.18) 60%, var(--surface)); border-color: rgba(239,68,68,.45); }
.badge-risk.med { background: color-mix(in srgb, rgba(250,204,21,.18) 60%, var(--surface)); border-color: rgba(250,204,21,.45); }
.badge-risk.low { background: color-mix(in srgb, rgba(34,197,94,.18) 60%, var(--surface)); border-color: rgba(34,197,94,.45); }

.popup-grid {
  display: grid;
  gap: 8px;
  color: var(--muted);
  font-size: 13px;
}
.popup-grid b { color: var(--text); }
.popup-actions {
  margin-top: 12px;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
.popup-actions a {
  padding: 9px 10px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: var(--surface);
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
.popup-actions a:hover { background: var(--surface-2); transform: translateY(-1px); }

.legend-mini {
  border: 1px solid var(--border);
  background: var(--surface);
  backdrop-filter: blur(12px);
  border-radius: 16px;
  padding: 12px;
  box-shadow: var(--sh-sm);
  color: var(--muted);
  font-size: 12.5px;
}
.legend-mini .row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 8px;
}
.legend-mini .sw {
  width: 12px; height: 12px; border-radius: 50%;
}
.legend-mini .sw.high { background: var(--danger); }
.legend-mini .sw.med { background: var(--warn); }
.legend-mini .sw.low { background: var(--ok); }

/* =========================================================
   DATABASE PAGE
========================================================= */
body.landing.data-page .main {
  padding-top: calc(var(--nav-h) + var(--s-7));
}

body.landing.data-page .db-toolbar {
  margin: var(--s-5) var(--s-6) 0;
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  background: var(--surface);
  box-shadow: var(--sh-sm);
  padding: var(--s-4);
  display: flex;
  flex-wrap: wrap;
  gap: var(--s-4);
  align-items: end;
  justify-content: space-between;
}
.db-field {
  display: grid;
  gap: 6px;
  min-width: 170px;
}
.db-field label { font-size: 12px; color: var(--muted); }
.db-grow { flex: 1; min-width: 260px; }
.db-field input, .db-field select {
  padding: 11px 12px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  outline: none;
}
.db-field input:focus, .db-field select:focus {
  border-color: rgba(96,165,250,.35);
  box-shadow: 0 0 0 4px rgba(96,165,250,.16);
}
.db-actions { display: flex; gap: var(--s-3); align-items: center; flex-wrap: wrap; }

.db-conn {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;
}
.db-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: var(--r-pill);
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--muted);
}
.db-badge.ok {
  border-color: rgba(34,197,94,.45);
  background: color-mix(in srgb, var(--surface) 70%, rgba(34,197,94,.16));
  color: var(--text);
}
.db-badge.bad {
  border-color: rgba(239,68,68,.45);
  background: color-mix(in srgb, var(--surface) 70%, rgba(239,68,68,.16));
  color: var(--text);
}
.db-hint { color: var(--muted); font-size: 13px; }

.db-table-wrap {
  margin: var(--s-5) var(--s-6) 0;
  border-radius: var(--r-xl);
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--sh-md);
  overflow: auto;
  max-height: calc(100vh - 360px);
}
.db-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  min-width: 980px;
}
.db-table thead th {
  position: sticky;
  top: 0;
  z-index: 2;
  background: color-mix(in srgb, var(--bg) 70%, rgba(14,165,233,.10));
  color: var(--text);
  text-align: left;
  font-size: 13px;
  padding: 12px;
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
}
.db-table thead th.sortable {
  cursor: pointer;
}
.db-table thead th.sortable:hover {
  background: color-mix(in srgb, var(--bg) 60%, rgba(14,165,233,.14));
}
.sort-ind {
  margin-left: 8px;
  color: var(--muted);
  font-size: 12px;
}

.db-table tbody td {
  padding: 12px;
  border-bottom: 1px solid var(--border);
  color: var(--muted);
  vertical-align: middle;
}
.db-table tbody tr:hover td {
  background: color-mix(in srgb, var(--surface) 70%, rgba(255,255,255,.04));
  color: var(--text);
}

.db-empty {
  text-align: center;
  padding: 18px;
  color: var(--muted);
}
.empty-box {
  display: grid;
  place-items: center;
  gap: 10px;
  padding: 22px 10px;
}
.empty-box i { font-size: 26px; color: var(--muted); }

.db-actions-col { white-space: nowrap; }
.db-mini {
  width: 40px;
  height: 40px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  cursor: pointer;
  margin-right: 6px;
  transition: transform .15s ease, background .15s ease;
}
.db-mini:hover { background: var(--surface-2); transform: translateY(-1px); }
.db-mini.danger {
  border-color: rgba(239,68,68,.45);
  background: color-mix(in srgb, var(--surface) 70%, rgba(239,68,68,.16));
}

.db-pager {
  margin: var(--s-5) var(--s-6) 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s-4);
  flex-wrap: wrap;
}
.db-pageinfo { color: var(--muted); }

.db-form { padding: var(--s-6); }
.db-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--s-4);
}
.db-small { color: var(--muted); font-size: 12px; }
.db-form-actions {
  margin-top: var(--s-4);
  display: flex;
  justify-content: flex-end;
  gap: var(--s-3);
  flex-wrap: wrap;
}
.db-error {
  margin-top: 10px;
  color: color-mix(in srgb, #fca5a5 80%, var(--text));
  min-height: 18px;
}
.field-error {
  font-size: 12px;
  color: color-mix(in srgb, #fca5a5 80%, var(--text));
}

/* ========== RESPONSIVE ========== */
@media (max-width: 980px) {
  .nav-links { display: none; }
  #sidebar { width: 330px; }
  #map { left: 330px; }
  #map-loading { left: 330px; }
}

@media (max-width: 760px) {
  .hero-grid { grid-template-columns: 1fr; }
  .cards-3, .cards-4, .split-grid { grid-template-columns: 1fr; }
  #sidebar { width: 100%; height: 46vh; top: var(--nav-h); }
  #map, #map-loading { left: 0; top: calc(var(--nav-h) + 46vh); height: calc(54vh); }
  .quick-actions { grid-template-columns: 1fr; }
  .db-grid { grid-template-columns: 1fr; }
  .db-table-wrap { max-height: none; }
  .stats-row { grid-template-columns: 1fr; }
}